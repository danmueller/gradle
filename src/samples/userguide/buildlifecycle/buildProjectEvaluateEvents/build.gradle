// START SNIPPET evaluate-events
build.afterProjectEvaluate {project ->
    if (project.hasTests) {
        println "Adding test task to $project"
        project.createTask('test') {
            println "Running tests for $project"
        }
    }
}
// END SNIPPET evaluate-events

allprojects*.hasTests = false
project(':projectA').hasTests = true