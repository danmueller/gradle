dependsOn ':shared'

configurations {
   spi
}

// START SNIPPET dependencies
dependencies {
    compile project(':shared')
// END SNIPPET dependencies
    compile module("commons-lang:commons-lang:2.4") {
        dependency("commons-io:commons-io:1.2")
    }
// START SNIPPET dependencies
}
// END SNIPPET dependencies

// Just a smoke test that using this option does not lead to any exception
compile.options.compilerArgs = [[value: '-Xlint:unchecked']]

task spiJar(type: Jar)
spiJar {
    appendix = 'spi'
    fileSet() {
        include('org/gradle/api/')
    }
}

artifacts {
  spi spiJar
}

// START SNIPPET dists
task dist(type: Zip)
dist {
    dependsOn configurations.runtime.buildDependencies
    files configurations.runtime
    fileSet dir: 'src/dist'
}
// END SNIPPET dists

// We want to test if commons-math was properly added to the build script classpath
org.apache.commons.math.fraction.Fraction lhs = new org.apache.commons.math.fraction.Fraction(1, 3);
org.gradle.buildsrc.BuildSrcClass bsc = new org.gradle.buildsrc.BuildSrcClass()